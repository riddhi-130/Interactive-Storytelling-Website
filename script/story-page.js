/* -------------------------- Story Page JSON Data -------------------------- */

let stories = [
  {
    "id": 1,
    "title": "The Thirsty Crow",
    "cardImage": "../assets/images/story-1-images/card-img.jpg",
    "steps": [
      {
        "question": "The crow flies under the hot sun, feeling very thirsty and searching for water.",
        "image": "../assets/images/story-1-images/scene-1-img.jpg",
        "options": [
          {
            "text": "Look around for water nearby.",
            "correct": true
          },
          {
            "text": "Sit down and wait for rain.",
            "correct": false
          }
        ]
      },
      {
        "question": "The crow sees a water pot from above and quickly flies down toward it.",
        "image": "../assets/images/story-1-images/scene-2-img.jpg",
        "options": [
          {
            "text": "Ignore the pot and keep flying.",
            "correct": false
          },
          {
            "text": "Check the pot for water.",
            "correct": true
          }
        ]
      },
      {
        "question": "The crow peers inside the pot and sees water, but it's too low to reach.",
        "image": "../assets/images/story-1-images/scene-3-img.jpg",
        "options": [
          {
            "text": "Think of a way to raise the water.",
            "correct": true
          },
          {
            "text": "Try to fit inside the pot.",
            "correct": false
          }
        ]
      },
      {
        "question": "The crow tries to drink but realizes the water is too deep for its beak.",
        "image": "../assets/images/story-1-images/scene-4-img.jpg",
        "options": [
          {
            "text": "Look around for help.",
            "correct": true
          },
          {
            "text": "Give up and fly away.",
            "correct": false
          }
        ]
      },
      {
        "question": "The crow gets an idea and flies off to gather small stones.",
        "image": "../assets/images/story-1-images/scene-5-img.jpg",
        "options": [
          {
            "text": "Try to push the pot over.",
            "correct": false
          },
          {
            "text": "Collect stones to drop in the pot.",
            "correct": true
          }
        ]
      },
      {
        "question": "The crow starts dropping stones into the pot one by one.",
        "image": "../assets/images/story-1-images/scene-6-img.jpg",
        "options": [
          {
            "text": "Stop after just one stone.",
            "correct": false
          },
          {
            "text": "Keep adding stones until water rises.",
            "correct": true
          }
        ]
      },
      {
        "question": "As more stones are added, the water level rises slowly.",
        "image": "../assets/images/story-1-images/scene-7-img.jpg",
        "options": [
          {
            "text": "Continue dropping stones until the water is reachable.",
            "correct": true
          },
          {
            "text": "Leave before the water is high enough.",
            "correct": false
          }
        ]
      },
      {
        "question": "Finally, the water rises to the top, and the crow can drink it.",
        "image": "../assets/images/story-1-images/scene-8-img.jpg",
        "options": [
          {
            "text": "Fly away without drinking.",
            "correct": false
          },
          {
            "text": "Drink the water happily.",
            "correct": true
          }
        ]
      }
    ]
  },
  {
    "id": 2,
    "title": "The Boy Who Cried The Wolf",
    "cardImage": "../assets/images/story-2-images/card-img.jpg",
    "steps": [
      {
        "question": "A boy is watching over sheep near a village and looks a bit bored while the sheep graze peacefully.",
        "image": "../assets/images/story-2-images/scene-2-img.jpg",
        "options": [
          {
            "text": "Shout 'Wolf!' to trick the villagers.",
            "correct": true
          },
          {
            "text": "Stay quiet and continue watching the sheep.",
            "correct": false
          }
        ]
      },
      {
        "question": "The boy yells 'Wolf!' and villagers come running to help, but there’s no wolf in sight.",
        "image": "../assets/images/story-2-images/scene-3-img.jpg",
        "options": [
          {
            "text": "Laugh and tell them it was a joke.",
            "correct": true
          },
          {
            "text": "Apologize for the false alarm.",
            "correct": false
          }
        ]
      },
      {
        "question": "The boy plays the same prank again, shouting 'Wolf!' and the villagers rush over—again, no wolf.",
        "image": "../assets/images/story-2-images/scene-4-img.jpg",
        "options": [
          {
            "text": "Promise not to lie again.",
            "correct": false
          },
          {
            "text": "Keep lying because it's fun.",
            "correct": true
          }
        ]
      },
      {
        "question": "Later, a real wolf appears near the sheep, and the boy starts yelling loudly for help.",
        "image": "../assets/images/story-2-images/scene-5-img.jpg",
        "options": [
          {
            "text": "Run to the village and tell the truth.",
            "correct": true
          },
          {
            "text": "Hide behind a tree and stay silent.",
            "correct": false
          }
        ]
      },
      {
        "question": "The villagers ignore the boy’s cries this time, thinking it’s another prank.",
        "image": "../assets/images/story-2-images/scene-6-img.jpg",
        "options": [
          {
            "text": "Trust the villagers will help anyway.",
            "correct": false
          },
          {
            "text": "Realize your lies have consequences.",
            "correct": true
          }
        ]
      },
      {
        "question": "The wolf attacks the flock while the boy watches helplessly, realizing no one is coming to help.",
        "image": "../assets/images/story-2-images/scene-7-img.jpg",
        "options": [
          {
            "text": "Learn a lesson about honesty.",
            "correct": true
          },
          {
            "text": "Blame the villagers for not helping.",
            "correct": false
          }
        ]
      },
      {
        "question": "The boy returns home sad and ashamed, knowing his sheep are gone because of his own lie.",
        "image": "../assets/images/story-2-images/scene-8-img.jpeg",
        "options": [
          {
            "text": "Admit his mistake to the villagers.",
            "correct": true
          },
          {
            "text": "Tell another lie to cover up.",
            "correct": false
          }
        ]
      },
      {
        "question": "The villagers listen as the boy finally tells the truth and apologizes sincerely.",
        "image": "../assets/images/story-2-images/scene-9-img.jpeg",
        "options": [
          {
            "text": "Laugh it off like it’s no big deal.",
            "correct": false
          },
          {
            "text": "Accept responsibility and say sorry.",
            "correct": true
          }
        ]
      },
      {
        "question": "The villagers forgive the boy but warn him not to lie again, especially in serious situations.",
        "image": "../assets/images/story-2-images/scene-10-img.jpeg",
        "options": [
          {
            "text": "Ignore their advice.",
            "correct": false
          },
          {
            "text": "Promise to be truthful.",
            "correct": true
          }
        ]
      },
      {
        "question": "The boy now watches over the sheep carefully, having learned his lesson about honesty.",
        "image": "../assets/images/story-2-images/scene-11-img.jpeg",
        "options": [
          {
            "text": "Stay honest and do your duty.",
            "correct": true
          },
          {
            "text": "Go back to lying when bored.",
            "correct": false
          }
        ]
      }
    ]
  },
  {
    "id": 3,
    "title": "The Lion And The Mouse",
    "cardImage": "../assets/images/story-3-images/card-img.jpg",
    "steps": [
      {
        "question": " A mighty lion naps under a tree in the jungle. A playful little mouse runs across his body, waking him up.",
        "image": "../assets/images/story-3-images/scene-1-img.jpg",
        "options": [
          {
            "text": "The lion eats the mouse angrily.",
            "correct": false
          },
          {
            "text": "The lion gently lets the mouse go.",
            "correct": true
          }
        ]
      },
      {
        "question": "The lion grabs the mouse with his paw. The frightened mouse begs to be let go and promises to help the lion someday.",
        "image": "../assets/images/story-3-images/scene-2-img.jpg",
        "options": [
          {
            "text": "The lion laughs but spares the mouse.",
            "correct": true
          },
          {
            "text": "The lion ignores the mouse and roars loudly.",
            "correct": false
          }
        ]
      },
      {
        "question": " Later, the lion gets trapped in a hunter’s net. He struggles, but the ropes are too strong.",
        "image": "../assets/images/story-3-images/scene-3-img.jpg",
        "options": [
          {
            "text": "The lion waits patiently for help. ",
            "correct": true
          },
          {
            "text": "The lion gives up and falls asleep.",
            "correct": false
          }
        ]
      },
      {
        "question": "The mouse hears the lion’s roars and rushes to help. It gnaws through the ropes with its tiny teeth.",
        "image": "../assets/images/story-3-images/scene-4-img.jpg",
        "options": [
          {
            "text": "The mouse runs away in fear.",
            "correct": false
          },
          {
            "text": " The mouse frees the lion by biting the net.",
            "correct": true
          }
        ]
      },
      {
        "question": "The lion is free and grateful to the mouse. They become friends and live happily in the jungle.",
        "image": "../assets/images/story-3-images/scene-5-img.jpg",
        "options": [
          {
            "text": "The lion and mouse become best friends.",
            "correct": true
          },
          {
            "text": " The lion chases the mouse away.",
            "correct": false
          }
        ]
      }
    ]
  },
  {
    "id": 4,
    "title": "The Little Red Hen",
    "cardImage": "../assets/images/story-4-images/card-img.jpeg",
    "steps": [
      {
        "question": "The Little Red Hen finds some grains of wheat on the ground and wants to plant them.",
        "image": "../assets/images/story-4-images/scene-1-img.png",
        "options": [
          {
            "text": " She asks her friends for help.",
            "correct": true
          },
          {
            "text": "She throws the grains away.",
            "correct": false
          }
        ]
      },
      {
        "question": "She asks the cow, the pig, and the dog to help her plant the wheat.",
        "image": "../assets/images/story-4-images/scene-2-img.png",
        "options": [
          {
            "text": "They all happily help her.",
            "correct": false
          },
          {
            "text": "They all say 'Not I' and refuse to help. ",
            "correct": true
          }
        ]
      },
      {
        "question": " The Little Red Hen plants the wheat by herself and watches it grow tall and golden.",
        "image": "../assets/images/story-4-images/scene-3-img.png",
        "options": [
          {
            "text": "She takes care of it patiently.",
            "correct": true
          },
          {
            "text": "She leaves it alone in the field.",
            "correct": false
          }
        ]
      },
      {
        "question": "When it’s time to harvest the wheat, she again asks her friends for help.",
        "image": "../assets/images/story-4-images/scene-4-img.png",
        "options": [
          {
            "text": "They finally decide to help.",
            "correct": false
          },
          {
            "text": "They refuse to help her again.",
            "correct": true
          }
        ]
      },
      {
        "question": "The Little Red Hen bakes a delicious loaf of bread with the wheat she harvested.",
        "image": "../assets/images/story-4-images/scene-5-img.png",
        "options": [
          {
            "text": "She eats it herself since no one helped.",
            "correct": true
          },
          {
            "text": "She shares it with the lazy animals.",
            "correct": false
          }
        ]
      }


    ]
  },
  {
    "id": 5,
    "title": "THE Ugly Duckling",
    "cardImage": "../assets/images/story-5-images/card-img.png",
    "steps": [
      {
        "question": "A mother duck watches her eggs hatch. All ducklings are cute and yellow—except one, who is large and gray.",

        "image": "../assets/images/story-5-images/scene-1-img.png",
        "options": [
          {
            "text": "The mother duck accepts the different duckling. ",
            "correct": true
          },
          {
            "text": "The mother duck tells him to leave.",
            "correct": false
          }
        ]
      },
      {
        "question": " The gray duckling is teased by the other animals for looking different. He feels sad and lonely.",
        "image": "../assets/images/story-5-images/scene-2-img.png",
        "options": [
          {
            "text": "The duckling fights back angrily.",
            "correct": false
          },
          {
            "text": "The duckling runs away to find a place he belongs.",
            "correct": true
          }
        ]
      },
      {
        "question": "The duckling wanders through the countryside, facing cold weather and hunger. He finds shelter in a bush near a pond.",
        "image": "../assets/images/story-5-images/scene-3-img.png",
        "options": [
          {
            "text": "He keeps moving, hoping for a better place.",
            "correct": true
          },
          {
            "text": "He gives up and hides forever. ",
            "correct": false
          }
        ]
      },
      {
        "question": " Spring arrives. The duckling sees beautiful swans on the pond and feels drawn to them.",
        "image": "../assets/images/story-5-images/scene-4-img.png",
        "options": [
          {
            "text": "He turns away, thinking they’ll mock him. ",
            "correct": false
          },
          {
            "text": " He decides to approach them shyly.",
            "correct": true
          }
        ]
      },
      {
        "question": "The swans welcome him. He looks at his reflection and sees he has grown into a beautiful swan.",
        "image": "../assets/images/story-5-images/scene-5-img.png",
        "options": [
          {
            "text": "He realizes he was always special.",
            "correct": true
          },
          {
            "text": "He still believes he’s ugly.",
            "correct": false
          }
        ]
      }
    ]
  }
];


/* ------------------------------ Story Page JS ----------------------------- */


let currentStep = 0;
let currentStory = null;

// Load story based on URL parameter
const urlParams = new URLSearchParams(window.location.search);
const storyId = parseInt(urlParams.get("id"));
currentStory = stories.find(s => s.id === storyId);
if (currentStory) renderStoryStep();

// Render a step in story-page.html
function renderStoryStep() {
  const step = currentStory.steps[currentStep];
  if (!step) {
    // Story is finished
    window.location.href = 'reset-page.html';
    return;
  }

  document.getElementById("question").innerText = step.question;
  document.getElementById("story-image").src = step.image;

  const [btn1, btn2] = [document.getElementById("option1"), document.getElementById("option2")];
  const buttons = [btn1, btn2];

  buttons.forEach((btn, index) => {
    const option = step.options[index];
    btn.disabled = false;
    btn.innerText = option.text;
    btn.onclick = () => {
      if (option.correct) {
        showPopup("✅ Right choice! 😆");
        buttons.forEach(b => b.active = true);

        setTimeout(() => {
          currentStep++;
          renderStoryStep();
        }, 2000);
      } else {
        showPopup("❌ Wrong choice! 😭");
        btn.disabled = true;
      }
    };
  });
}

function showPopup(message) {
  const popup = document.getElementById("popup");
  popup.textContent = message;
  popup.classList.remove("hidden");
  popup.style.display = "block";

  setTimeout(() => {
    popup.classList.add("hidden");
    popup.style.display = "none";
  }, 2000);
}
